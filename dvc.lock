schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/data/make_dataset.py
    deps:
    - path: data/external/pima-indians-diabetes.csv
      hash: md5
      md5: 344daa2f85d4d764b34acb36bc300165
      size: 23193
    - path: src/data/make_dataset.py
      hash: md5
      md5: 28dd734b1a8ae645af33270d65a33d4e
      size: 3159
    params:
      params.yaml:
        make_dataset.column_names:
        - Pregnancies
        - Glucose
        - BloodPressure
        - SkinThickness
        - Insulin
        - BMI
        - DiabetesPedigreeFunction
        - Age
        - Outcome
        make_dataset.data_source_url: 
          https://raw.githubusercontent.com/jbrownlee/Datasets/master/pima-indians-diabetes.data.csv
        make_dataset.random_state: 42
        make_dataset.test_size: 0.3
    outs:
    - path: data/interim/test_data.csv
      hash: md5
      md5: 43f6ff887740528e9ebdd444b2f3a6d5
      size: 7055
    - path: data/interim/train_data.csv
      hash: md5
      md5: a16fb47ddaf8240698b8e43c190c6e6b
      size: 16332
  data_preprocessing:
    cmd: python src/data/process_dataset.py
    deps:
    - path: data/interim/train_data.csv
      hash: md5
      md5: a16fb47ddaf8240698b8e43c190c6e6b
      size: 16332
    - path: src/data/process_dataset.py
      hash: md5
      md5: 06863a195d0e4443d027b3fa5d0d550a
      size: 1685
    params:
      params.yaml:
        process_dataset.column_name:
        - Insulin
  feature_engineering:
    cmd: python src/features/build_features.py
    deps:
    - path: data/interim/test_data.csv
      hash: md5
      md5: 43f6ff887740528e9ebdd444b2f3a6d5
      size: 7055
    - path: data/interim/train_data.csv
      hash: md5
      md5: a16fb47ddaf8240698b8e43c190c6e6b
      size: 16332
    - path: src/features/build_features.py
      hash: md5
      md5: c17253d5765a5b7f657fcc290781ab44
      size: 3302
    outs:
    - path: data/processed/test_df_processed.csv
      hash: md5
      md5: fb448859916587e8a2885425e6af5726
      size: 41067
    - path: data/processed/train_df_processed.csv
      hash: md5
      md5: 392ed6402b55f35cda2627bd5cd70ccd
      size: 88585
  model_building:
    cmd: python src/models/train_model.py
    deps:
    - path: data/processed/train_df_processed.csv
      hash: md5
      md5: 392ed6402b55f35cda2627bd5cd70ccd
      size: 88585
    - path: src/models/train_model.py
      hash: md5
      md5: a8d7d3f9fb2e79cb3321539eed39f9e4
      size: 9921
    params:
      params.yaml:
        train_model.max_depth:
        - 2
        - 8
        train_model.max_features:
        - 0.2
        - 0.6
        - 1.0
        train_model.max_samples:
        - 0.5
        - 0.75
        - 1.0
        train_model.min_samples_leaf:
        - 1
        - 2
        train_model.min_samples_split:
        - 2
        - 5
        train_model.n_estimators:
        - 20
        - 60
        - 100
        - 120
        train_model.n_jobs: -1
        train_model.random_state: 42
        train_model.verbose: 2
    outs:
    - path: models/rfclf_model.joblib
      hash: md5
      md5: 8f01f9f472616b01f3cf007937a6ba12
      size: 376649
  model_evaluation:
    cmd: python src/models/predict_model.py
    deps:
    - path: data/processed/test_df_processed.csv
      hash: md5
      md5: fb448859916587e8a2885425e6af5726
      size: 41067
    - path: data/processed/train_df_processed.csv
      hash: md5
      md5: 392ed6402b55f35cda2627bd5cd70ccd
      size: 88585
    - path: models/rfclf_model.joblib
      hash: md5
      md5: 8f01f9f472616b01f3cf007937a6ba12
      size: 376649
    - path: src/models/predict_model.py
      hash: md5
      md5: 0115c180e129579d1641387d3d70fd38
      size: 6543
    outs:
    - path: reports/experiment_info.json
      hash: md5
      md5: 1d96f4bcf2a23ffbdd1b3faa1626eed2
      size: 81
    - path: reports/metrics.json
      hash: md5
      md5: b9afc03c918e1fb298469961bf2ea73a
      size: 164
  model_registration:
    cmd: python src/models/register_model.py
    deps:
    - path: reports/experiment_info.json
      hash: md5
      md5: 1d96f4bcf2a23ffbdd1b3faa1626eed2
      size: 81
    - path: src/models/register_model.py
      hash: md5
      md5: 718475c38fa5cd61f8e882c6bef7a446
      size: 2912
